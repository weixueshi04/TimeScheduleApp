# TimeScheduleApp / FocusLife

> 从"时间管理工具"到"有温度的自律空间"

---

## 🎯 项目现状

### FocusLife v1.0 (当前版本)
**状态**: 🟢 核心功能已完成 75%

个人时间与健康管理应用,采用iOS风格设计:
- ✅ 任务管理 (CRUD + 筛选 + 排序)
- ✅ 专注计时器 (番茄钟)
- ✅ 健康管理 (睡眠/饮水/运动/用餐/体重/心情)
- ✅ 首页数据集成
- ✅ **通用UI组件库** (迭代2新增)
  - 可复用的按钮、卡片、输入框、对话框等组件
  - 统一的设计风格和交互体验
  - iOS风格的视觉设计系统
- ⏳ 数据统计页面 (待完成)
- ⏳ 本地通知 (待完成)

**技术栈**: Flutter + Hive + Provider (纯本地应用,无需后端)

---

## 🚀 产品方向重大更新 (2025-11-23)

### 新方向: TimeScheduleApp v2.0 - 网络自习室

**核心理念**: "从自律到他律" - 通过社交压力和同伴监督,帮助缺乏自律的人完成目标

### 💡 核心功能

#### 1. 网络自习室 (多人实时协作)
```
┌─────────────────────────────────┐
│ 📊 夜猫子工作室   19:32/21:00   │
│ ⚡ 自习室总能量：81%             │
├─────────────────────────────────┤
│ 房主 @阿星  ████████░░ 85%      │
│ 成员 @小美  █████████░ 92%      │
│ 成员 @老王  ███████░░░ 78%      │
│ 👤 你     █████████░ 90%       │
└─────────────────────────────────┘
```

**特色**:
- 🎯 智能匹配: 根据时间段、任务类型、完成率匹配合适的自习室
- ⚡ 能量条系统: 可视化所有成员的专注状态,营造集体责任感
- 🚫 提前退出惩罚: 扣积分 + 限时禁入,培养承诺意识
- 🎤 临时休息室: 语音聊天,5-10分钟休息
- 💬 完成后分享: 语音/文字分享学习成果 (可选)

#### 2. 准入机制
- 注册满3天 + 完成5次专注 **OR** 累计3小时
- 未解锁前可观摩优秀自习室
- 营造"稀缺感"和"特权感"

#### 3. 默契度系统
- 与同一用户多次共同学习,积累默契度
- 等级: 陌生人 → 点头之交 → 学习伙伴 → 默契搭档 → 灵魂伴侣
- 解锁私信、专属自习室等功能

---

## 🏗️ 技术架构对比

### v1.0 (当前)
```
前端: Flutter + Provider
数据: Hive (本地NoSQL)
模式: 单机应用
```

### v2.0 (新方向)
```
前端: Flutter + Provider + WebSocket + WebRTC
后端: Node.js/Go + Socket.io + Express
数据库:
  - PostgreSQL (用户/任务/自习室)
  - Redis (实时状态/匹配队列)
  - MongoDB (聊天/分享内容)
第三方:
  - 阿里云OSS (语音存储)
  - 腾讯云天御 (内容审核)
  - 极光推送 (通知)
```

**代码复用率**: 约35-40% (UI和业务逻辑可复用)

---

## 📅 开发计划

### 阶段1: 完成v1.0单机版 (4周) - 当前阶段
- [x] ~~生成Hive Adapter代码~~ (迭代1完成)
- [x] ~~通用UI组件库~~ (迭代2完成)
- [ ] 实现数据统计页面 (下一步)
- [ ] 集成本地通知
- [ ] 全面测试并发布

**已完成迭代**:
- ✅ 迭代1: 代码结构统一 (2025-11-24)
- ✅ 迭代2: 核心功能UI完善 (2025-11-25)
- ✅ 迭代3: 稳定性和性能增强 (2025-11-28)

### 阶段2: 添加后端基础设施 (8周)
- [ ] 搭建Node.js/Go服务器
- [ ] 实现用户系统 (注册/登录)
- [ ] 数据云同步功能
- [ ] API开发与联调

### 阶段3: 实现简化版自习室 (10周)
- [ ] WebSocket实时通信
- [ ] 匹配算法实现
- [ ] 能量条系统
- [ ] 文字分享功能

### 阶段4: 完整版社交功能 (10周)
- [ ] 临时休息室 (语音)
- [ ] 默契度系统
- [ ] 专属自习室
- [ ] 智能匹配优化

**预计总周期**: 32周 (约8个月)

---

## 📊 关键指标

### v1.0 成功标准
- 次日留存 ≥ 30%
- 7日留存 ≥ 15%
- 平均专注时长 ≥ 40分钟

**如果达标** → 继续v2.0开发
**如果不达标** → 暂停,优化v1.0体验

### v2.0 目标
- DAU/MAU ≥ 30%
- 自习室使用率 ≥ 30%
- 自习室完成率 ≥ 70%
- 平均每周使用 ≥ 3次

---

## 💰 成本预估

### 人力
- 前端工程师: 1人
- 后端工程师: 1人
- 测试工程师: 0.5人
- **总计**: 约17.5人月

### 服务器 (月度)
- 初期 (<1000用户): ¥500/月
- 中期 (1000-10000): ¥1000/月
- 后期 (>10000): ¥3000-5000/月

---

## 📚 文档清单

| 文档 | 说明 | 状态 |
|-----|------|------|
| [BUILD_INSTRUCTIONS.md](./BUILD_INSTRUCTIONS.md) | 构建和运行指南 | ✅ |
| [PROJECT_FINAL_REPORT.md](./PROJECT_FINAL_REPORT.md) | v1.0开发完成报告 | ✅ |
| [PRODUCT_ROADMAP_V2.md](./PRODUCT_ROADMAP_V2.md) | v2.0产品路线图 | ✅ |
| [ITERATION1_COMPLETE_REPORT.md](./ITERATION1_COMPLETE_REPORT.md) | 迭代1完成报告 | ✅ |
| [ITERATION2_COMPLETE_REPORT.md](./ITERATION2_COMPLETE_REPORT.md) | 迭代2完成报告 | ✅ |
| [ITERATION3_COMPLETE_REPORT.md](./ITERATION3_COMPLETE_REPORT.md) | 迭代3完成报告 | ✅ |
| TECH_ARCHITECTURE.md | 技术架构设计 | ⏳ 待创建 |
| DATABASE_DESIGN.md | 数据库设计文档 | ⏳ 待创建 |
| API_DOCUMENTATION.md | API接口文档 | ⏳ 待创建 |

---

## 🚀 快速开始

### 运行v1.0 (当前版本)

1. **安装依赖**
   ```bash
   flutter pub get
   ```

2. **生成Hive Adapter代码** (必须!)
   ```bash
   flutter packages pub run build_runner build --delete-conflicting-outputs
   ```

3. **运行应用**
   ```bash
   flutter run
   ```

### 注意事项
⚠️ 必须先生成Hive Adapter代码,否则会报错!

---

## ⚠️ 风险提示

### 技术风险
- WebSocket高并发性能瓶颈
- 实时匹配算法效率
- 语音存储成本

### 产品风险
- 用户觉得"被监视"压力过大 → **应对**: 独立模式永远可用
- 自习室变成纯社交场所 → **应对**: 专注期间禁止聊天
- 匹配不到合适自习室 → **应对**: 提供AI自习室

---

## 🤝 贡献指南

目前处于产品方向转型期,暂不接受外部贡献。

内部开发团队:
- 前端: [开发者]
- 后端: [开发者]
- 产品: [产品经理]
- 设计: [设计师]

---

## 📞 联系方式

- **GitHub Issues**: [提交问题]
- **Email**: [联系邮箱]

---

## 📄 许可证

MIT License

---

**当前版本**: v0.7.0-alpha (FocusLife)
**目标版本**: v2.0.0 (TimeScheduleApp)
**最后更新**: 2025-11-25

---

> **产品理念**: "自律很难,但并非不可能。他人的支持可以成为改变的起点。"
